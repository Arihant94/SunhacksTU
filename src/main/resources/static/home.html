<!DOCTYPE html>
<html><head>
    <script type="text/javascript" src="js/jquery-2.1.1.js"></script>
    <script type="text/javascript" src="bootstrap-3.3.7/js/bootstrap.min.js"></script>
    <script type="text/javascript" src="js/isometric/main.js"></script>
    <script>
        $( document ).ready(function() {
            getLocation();
                $("#btn-search").click(function(event) {

                    //stop submit the form, we will post it manually.
                event.preventDefault();

                fire_ajax_submit();

            });
        });
        function fire_ajax_submit() {

            const data =  $("#homeform").serializeArray();

            $("#btn-search").prop("disabled", true);

            $.ajax({
                type: "POST",
                contentType: "application/json",
                url: "/getEvents",
                data: JSON.stringify(data),
                dataType: 'json',
                cache: false,
                timeout: 600000,
                success: function (data) {

                    var json = "<h4>Ajax Response</h4><pre>"
                        + JSON.stringify(data, null, 4) + "</pre>";
                    $('#result').html(json);

                    console.log("SUCCESS : ", data);
                    $("#btn-search").prop("disabled", false);

                },
                error: function (e) {

                    var json = "<h4>Ajax Response</h4><pre>"
                        + e.responseText + "</pre>";
                    $('#result').html(json);

                    console.log("ERROR : ", e);
                    $("#btn-search").prop("disabled", false);

                }
            });

        }
        function getLocation() {
            if (navigator.geolocation) {
                navigator.geolocation.getCurrentPosition(showPosition);
            } else {
                x.innerHTML = "Geolocation is not supported by this browser.";
            }
        }

        function showPosition(position) {
            document.getElementById('lat').value=position.coords.latitude;
            document.getElementById('long').value=position.coords.longitude;
        }
    </script>
    <meta charset="utf-8">
    <title>TimeUtopia</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">

    <!-- CSS -->
    <link rel="stylesheet" href="bootstrap-3.3.7/css/bootstrap.min.css">
    <link rel="stylesheet" href="css/font-awesome.min.css">
    <link rel="stylesheet" href="css/pe-icon-7-stroke.css">
    <link rel="stylesheet" href="css/eden-responsive.css">
    <link rel="stylesheet" href="css/default.css">
    <link rel="stylesheet" href="css/main.css">


    <!-- google fonts -->
    <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Orbitron:400,500,700,900">
    <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:100,300,400,500,700,900">
    <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto+Slab:100,300,400,700">
    <link href="https://fonts.googleapis.com/css?family=Timmana" rel="stylesheet">
    <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Playfair+Display:400,400i,700,700i,900,900i">
    <link href="https://fonts.googleapis.com/css?family=Montserrat:100,100i,200,200i,300,300i,400,400i,500,500i,600,600i,700,700i,800,800i,900,900i|Raleway:100,100i,200,200i,300,300i,400,400i,500,500i,600,600i,700,700i,800,800i,900,900i" rel="stylesheet">

    <!-- favicon -->
    <link rel="shortcut icon" href="images/eden-logo.png">

    <!-- HTML5 shim, for IE6-8 support of HTML5 elements. All other JS at the end of file. -->
    <!--[if lt IE 9]>
    <script src="../js/html5shiv.js"></script>
    <script src="../js/respond.min.js"></script>
    <![endif]-->
</head>
<body>

<div id="page" class="page">



    <nav role="navigation" class="navbar navbar-default">
        <div class="container">
            <div class="navbar-header">
                <button data-target="#navbar-collapse-02" data-toggle="collapse" class="navbar-toggle" type="button">
                    <span class="sr-only">Toggle navigation</span>
                    <span class="icon-bar"></span>
                    <span class="icon-bar"></span>
                    <span class="icon-bar"></span>
                </button>
                <a href="#" class="navbar-brand brand"><i class="fa fa-gg fa-flip-horizontal"></i>timeutopia</a>
            </div>

            <div id="navbar-collapse-02" class="collapse navbar-collapse">
                <ul class="nav navbar-nav navbar-right">
                    <li class="active"><a href="#">Home</a></li>
                    <li><a href="#">My Events History</a></li>
                </ul>
            </div>
        </div>
    </nav>

    <div class="intro">
        <div class="container">
            <div class="row">
                <div class="col-md-12">
                    <div class="header-content text-left">
                        <h1 class="margin-auto">Time is precious!</br>Make the most of it</h1>
                        <br><br>
                        <h4>How much time do you want us plan?</h4>
                        <div>

                            <form id ="homeform" class="homeform">
                                <input type="text" name="firstname" placeholder="In Hours"><br><br><br>
                                <input type="hidden" id="lat">
                                <input type="hidden" id="long">
                            </form>
                        </div>

                        <a href="#" class="btn btn-info button" id = "btn-search">Get Events</a>
                    </div>
                </div>
            </div>

        </div>
    </div>
    <div id ="result"></div>

</div>
    <!--=== Load JS here for greater good ====-->



</body>
</html>